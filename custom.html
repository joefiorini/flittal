<html>

  <head>
    <title>Embedding Elm in HTML!</title>
    <script type="text/javascript" src="/elm-runtime.js"></script>
    <script type="text/javascript" src="build/main.js"></script>
  </head>

  <body>

    <script>
      var result = {
        id: "",
        startX: 0,
        startY: 0,
        endX: 0,
        endY: 0
      };

      var board = Elm.fullscreen(Elm.Main, {
        dragstart: result,
        dragend: result,
        drop: result
      });

      function sendPort(port, result) {
        console.log('sending ', port, result);
        board.ports[port].send(result);
      }

      setTimeout(function() {
        var container = document.getElementById("container");
        container.addEventListener('dragstart', function(e) {

          result.id = e.target.id;
          result.startX = event.clientX;
          result.startY = event.clientY;

          sendPort('dragstart', result);
        });

        container.addEventListener('dragover', function(e) {
          e.preventDefault();
        });

        container.addEventListener('dragend', function(e) {
          sendPort('dragend', result);
        });

        container.addEventListener('drop', function(e) {
          e.stopPropagation();
          result.endX = e.clientX;
          result.endY = e.clientY;

          sendPort('drop', result);
        });
      }, 1000);
      // board.ports.dragstart.send
    </script>
  </body>


</html>
